# Perastage Help

Perastage is a high-performance, cross-platform viewer for MVR (My Virtual Rig) scenes with 3D rendering, scene analysis and editable tabular data interfaces. It is designed for lighting professionals and developers working with the GDTF and MVR standards.

## Getting Started

1. Launch the application.
2. Use **File â†’ Import MVR** to load an `.mvr` file.
3. Navigate through the 3D viewport and explore scene elements via:
   - Fixtures Table
   - Trusses Table
   - Objects Table
4. Use the **View** menu to toggle visibility of side panels and tables.

## Keyboard Shortcuts

| Key Combination      | Function                      |
|----------------------|-------------------------------|
| Arrow Keys           | Orbit camera                  |
| Shift + Arrow Keys   | Pan camera                    |
| Alt + Arrow Keys     | Zoom in/out                   |
| Numpad 1 / 3 / 7     | Front, Right, Top views       |
| Numpad 5             | Reset camera orientation      |
| 1 / 2 / 3            | Switch between tables         |

### 2D Viewer

| Key Combination   | Function        |
|-------------------|-----------------|
| Mouse drag        | Pan view        |
| Mouse wheel       | Zoom in/out     |
| Arrow Keys        | Pan view        |
| Alt + Arrow Keys  | Zoom in/out     |

## Panels and Dialogs

### Fixture Table
- Displays all parsed fixture objects from the MVR file.
- Columns include: Name, Fixture Type, Mode, Address, Layer, Position.
- Rotation columns are labeled **Roll (X)**, **Pitch (Y)** and **Yaw (Z)** and
  are applied in Z/Y/X order.
- Context menu options:
  - Edit Address (via `AddressDialog`)
  - Replace Fixture (via `AddFixtureDialog`)
  - Export to GDTF (`ExportFixtureDialog`)

### Truss Table
- Displays imported trusses with geometry, dimensions, and metadata.
- Rotation columns are labeled **Roll (X)**, **Pitch (Y)** and **Yaw (Z)**.
- Export functionality provided by `ExportTrussDialog`.

### Objects Table
- Lists generic scene objects and their transforms.
- Rotation columns are labeled **Roll (X)**, **Pitch (Y)** and **Yaw (Z)**.

### Console Panel
- Displays status messages and logs.
- Can be toggled from the View menu.

## File Menu Options

| Menu Option        | Description                            |
|--------------------|----------------------------------------|
| Import Rider       | Load fixture/truss info from .txt/.pdf |
| Import MVR         | Load an `.mvr` scene file              |
| Export GDTF        | Export selected fixtures               |
| Export MVR Objects | Save selected elements into a new file |
| Recent Files       | Access previously opened scenes        |
| Exit               | Close the application                  |

## View Menu

| Menu Option      | Description                     |
|------------------|---------------------------------|
| Fixtures Table   | Toggle fixture list panel       |
| Trusses Table    | Toggle truss list panel         |
| Console Output   | Show/hide output log            |
| 3D Viewport      | Enable or disable 3D rendering  |

## Configuration Management

Settings are stored using a modular configuration manager. It supports saving and restoring:

- Panel visibility states
- Last used file paths
- View mode preferences

## File Format Support

- MVR 1.6: Import of scenes, positions, trusses, fixtures
- GDTF: Supports embedded fixture definitions
- 3DS / GLB: 3D model formats used in MVR/GDTF

## Planned and Experimental Features

- Grouping and filtering by Layer
- 2D plan generation
- Automatic basic layout generation from text
- Enhanced GDTF file support
- Dictionary for replacing autogenerated basic GDTF files with detailed versions

## Developer Information

- Organized codebase:
  - `core/`: logic and data handling
  - `gui/`: user interface components
  - `render/`: future rendering backend
- Developed with C++20 and CMake
- Uses `wxWidgets`, `tinyxml2`, and other open libraries

## Troubleshooting

- If the 3D viewport does not display:
  - Confirm OpenGL libraries are installed
  - Ensure the MVR contains valid geometry and GDTF references
- If objects do not appear in tables:
  - Verify the MVR contains proper object definitions
  - Check the console for warnings or errors

## Additional Documentation

- MVR Specification: `docs/mvr-spec.md`
- GDTF Specification: `docs/gdtf-spec.md`
- License: `LICENSE.txt` (GPL v3)
